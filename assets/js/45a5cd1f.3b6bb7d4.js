"use strict";(self.webpackChunkratis_tmp=self.webpackChunkratis_tmp||[]).push([[4e3],{7515:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"concepts","title":"Concepts","description":"RaftServer","source":"@site/docs/concepts.md","sourceDirName":".","slug":"/concepts","permalink":"/ratis-site/docs/concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ratis-site/edit/main/docs/concepts.md","tags":[],"version":"current","frontMatter":{"title":"Concepts"},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started (Detailed)","permalink":"/ratis-site/docs/getting-started-detailed"},"next":{"title":"Snapshot Guide","permalink":"/ratis-site/docs/snapshot"}}');var r=n(4848),i=n(8453);const s={title:"Concepts"},o=void 0,c={},d=[{value:"RaftServer",id:"raftserver",level:2},{value:"RaftPeer and RaftPeerId",id:"raftpeer-and-raftpeerid",level:2},{value:"RaftGroup",id:"raftgroup",level:2},{value:"Transport (gRPC, Netty, etc.)",id:"transport-grpc-netty-etc",level:2},{value:"RaftLog",id:"raftlog",level:2},{value:"Snapshot",id:"snapshot",level:2},{value:"TermIndex",id:"termindex",level:2},{value:"StateMachine",id:"statemachine",level:2},{value:"The <code>applyTransaction</code> method",id:"the-applytransaction-method",level:3},{value:"StateMachineStorage",id:"statemachinestorage",level:3}];function l(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"raftserver",children:"RaftServer"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"RaftServer"})," is a core component of Apache Ratis, responsible for handling all operations related to the RAFT protocol. A ",(0,r.jsx)(t.code,{children:"RaftServer"})," manages all the ",(0,r.jsx)(t.code,{children:"RaftGroup"}),"(s) within the current process. For each group, a corresponding ",(0,r.jsx)(t.code,{children:"RaftServer.Division"})," handles the core functions such as replication of log entries, voting, and leader election within that group. Each division can independently act as a Leader, Candidate, Follower or Listener, with the specific role depending on the outcome of elections and the state of the protocol."]}),"\n",(0,r.jsx)(t.h2,{id:"raftpeer-and-raftpeerid",children:"RaftPeer and RaftPeerId"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"RaftPeer"})," represents a participant node in the cluster, including the node's unique identifier, IP address, and port number. The unique identifier is represented by the ",(0,r.jsx)(t.code,{children:"RaftPeerId"})," class, which is crucial for distinguishing different nodes within a cluster."]}),"\n",(0,r.jsx)(t.h2,{id:"raftgroup",children:"RaftGroup"}),"\n",(0,r.jsxs)(t.p,{children:["A ",(0,r.jsx)(t.code,{children:"RaftGroup"})," represents a collection of ",(0,r.jsx)(t.code,{children:"RaftPeer"}),"(s) in a Raft protocol cluster. Each group has a unique identifier represented by the ",(0,r.jsx)(t.code,{children:"RaftGroupId"})," class. Multiple groups can operate independently within a physical network, while each group managing its own consistency and state replication."]}),"\n",(0,r.jsx)(t.h2,{id:"transport-grpc-netty-etc",children:"Transport (gRPC, Netty, etc.)"}),"\n",(0,r.jsx)(t.p,{children:"Ratis supports various network transport protocols for node communication, including gRPC (default) and Netty. These transport layers in Ratis are used for data serialization and deserialization, as well as ensuring safe and efficient data transmission between different nodes."}),"\n",(0,r.jsx)(t.h2,{id:"raftlog",children:"RaftLog"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"RaftLog"})," is a core component of the Raft algorithm, used to record all state change transactions. Once a log entry has been acknowledged by a majority of peers, the entry becomes committed. The Raft log is key to achieving distributed data consistency."]}),"\n",(0,r.jsx)(t.h2,{id:"snapshot",children:"Snapshot"}),"\n",(0,r.jsxs)(t.p,{children:["A ",(0,r.jsx)(t.code,{children:"Snapshot"})," is a point-in-time copy of the current state of the ",(0,r.jsx)(t.code,{children:"StateMachine"}),". It can be used for quick recovery of the state after system restarts, and for transferring the state to newly joined nodes. When a snapshot has been taken, the log entries earlier than the snapshot can be purged in order to free up the storage space."]}),"\n",(0,r.jsx)(t.h2,{id:"termindex",children:"TermIndex"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"TermIndex"})," is an order pair of ",(0,r.jsx)(t.code,{children:"long"})," integers (term, index) as defined in the Raft protocol. Term is the logical clock in Raft. A newly elected leader starts a new term and remains the leader for the rest of the term. Index is the position of log entries in the Raft log."]}),"\n",(0,r.jsx)(t.h2,{id:"statemachine",children:"StateMachine"}),"\n",(0,r.jsxs)(t.p,{children:["In Ratis, ",(0,r.jsx)(t.code,{children:"StateMachine"})," is the abstraction point for user-defined code. Developers implement specific business logic or data storage operations at this layer. The transactions committed through the Raft protocol will be applied to it."]}),"\n",(0,r.jsxs)(t.h3,{id:"the-applytransaction-method",children:["The ",(0,r.jsx)(t.code,{children:"applyTransaction"})," method"]}),"\n",(0,r.jsxs)(t.p,{children:["In Ratis, transaction processing is implemented by the ",(0,r.jsx)(t.code,{children:"StateMachine"})," through the ",(0,r.jsx)(t.code,{children:"applyTransaction"})," method. A transaction usually changes the state of the ",(0,r.jsx)(t.code,{children:"StateMachine"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"statemachinestorage",children:"StateMachineStorage"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"StateMachineStorage"})," is a component for storing data related to the ",(0,r.jsx)(t.code,{children:"StateMachine"}),". It is for persisting the Raft log and the snapshots such that the state can be fully recovered even after system failures."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var a=n(6540);const r={},i=a.createContext(r);function s(e){const t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);