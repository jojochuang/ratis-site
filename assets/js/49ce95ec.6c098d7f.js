"use strict";(self.webpackChunkratis_tmp=self.webpackChunkratis_tmp||[]).push([[5844],{5977:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>l,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"contributors/building","title":"Building","description":"Apache Ratis uses Apache Maven 3.3.9 or later to build the artifacts. You can use the bundled Maven Wrapper to build without a pre-installed Maven, by replacing mvn with the mvnw (*nix) or mvnw.cmd (Windows) script in the root path.","source":"@site/docs/contributors/building.md","sourceDirName":"contributors","slug":"/contributors/building","permalink":"/ratis-site/docs/contributors/building","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ratis-site/edit/main/docs/contributors/building.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Metrics","permalink":"/ratis-site/docs/metrics"},"next":{"title":"Deploying Releases/Snapshots","permalink":"/ratis-site/docs/contributors/deploying"}}');var s=r(4848),n=r(8453);const d={},a="Building",o={},c=[{value:"What packages are shaded?",id:"what-packages-are-shaded",level:2}];function h(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"building",children:"Building"})}),"\n",(0,s.jsxs)(t.p,{children:["Apache Ratis uses Apache Maven 3.3.9 or later to build the artifacts. You can use the bundled Maven Wrapper to build without a pre-installed Maven, by replacing ",(0,s.jsx)(t.code,{children:"mvn"})," with the ",(0,s.jsx)(t.code,{children:"mvnw"})," (*nix) or ",(0,s.jsx)(t.code,{children:"mvnw.cmd"})," (Windows) script in the root path.\nApache Ratis is written in Java 8. Therefore, it as well requires Java 8 or later.\nProject could be built as a usual Maven project:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ mvn clean package -DskipTests\n"})}),"\n",(0,s.jsx)(t.p,{children:"Note: subsequent builds could be faster with skiping shading/protobuf compile steps. See the next section for more info."}),"\n",(0,s.jsx)(t.h1,{id:"thirdparty",children:"Thirdparty"}),"\n",(0,s.jsxs)(t.p,{children:["All bundled thirdparty dependencies are centralized in the ",(0,s.jsx)(t.em,{children:"ratis-thirdparty"})," module and the ",(0,s.jsx)(t.em,{children:"ratis-thirdparty-misc"})," module. These modules are located in a separated repository but not attached to the core Apache Ratis repository as they only need to change when one of these dependencies are changed. All dependencies included in ratis-thirdparty/ratis-thirdparty-misc must be relocated to a different package to ensure no downstream classpath pollution. Ratis developers should rely on these relocated thirdparty classes. As a result of this thirdparty module, there is no need for ",(0,s.jsx)(t.code,{children:"skipShade"})," options in the build which previously existed because the shaded artifacts that are generated each build are limited only to the code in Ratis itself."]}),"\n",(0,s.jsx)(t.h2,{id:"what-packages-are-shaded",children:"What packages are shaded?"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Original packages"}),(0,s.jsx)(t.th,{children:"Shaded packages"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"com.google.common"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"org.apache.ratis.thirdparty.com.google.common"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"com.google.protobuf"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"org.apache.ratis.thirdparty.com.google.protobuf"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"com.google.thirdparty.publicsuffix"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"org.apache.ratis.thirdparty.com.google.thirdparty.publicsuffix"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"io.grpc"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"org.apache.ratis.thirdparty.io.grpc"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"io.netty"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"org.apache.ratis.thirdparty.io.netty"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["All compiled protocol-buffer definitions in ",(0,s.jsx)(t.code,{children:"ratis-proto"})," are stored in the ",(0,s.jsx)(t.code,{children:"org.apache.ratis.proto"})," Java package."]}),(0,s.jsx)(t.td,{})]})]})]})]})}function l(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>d,x:()=>a});var i=r(6540);const s={},n=i.createContext(s);function d(e){const t=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);