"use strict";(self.webpackChunkratis_tmp=self.webpackChunkratis_tmp||[]).push([[3545],{5875:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"features/unordered-async-read","title":"Unordered Async Read Support","description":"This feature addresses the limitation in Ratis where asynchronous read calls were strictly ordered. Previously, if a long-running asynchronous read (like a \\"watch a key\\" request) was initiated, subsequent asynchronous calls from the same client would be blocked until the watch request completed. This new feature introduces support for unordered asynchronous reads, allowing other asynchronous operations to proceed without waiting for a pending read.","source":"@site/docs/features/unordered-async-read.md","sourceDirName":"features","slug":"/features/unordered-async-read","permalink":"/ratis-site/docs/features/unordered-async-read","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ratis-site/edit/main/docs/features/unordered-async-read.md","tags":[],"version":"current","frontMatter":{"title":"Unordered Async Read Support"},"sidebar":"tutorialSidebar","previous":{"title":"Non-Voting Members (Listeners)","permalink":"/ratis-site/docs/features/listeners"},"next":{"title":"Linearizable Read from Followers","permalink":"/ratis-site/docs/features/linearizable-read"}}');var t=r(4848),a=r(8453);const i={title:"Unordered Async Read Support"},o="Unordered Async Read Support",c={},d=[{value:"Motivation",id:"motivation",level:2},{value:"API Methods",id:"api-methods",level:2},{value:"Asynchronous API (<code>org.apache.ratis.client.api.AsyncApi</code>)",id:"asynchronous-api-orgapacheratisclientapiasyncapi",level:3},{value:"Configuration",id:"configuration",level:2},{value:"References",id:"references",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"unordered-async-read-support",children:"Unordered Async Read Support"})}),"\n",(0,t.jsx)(n.p,{children:'This feature addresses the limitation in Ratis where asynchronous read calls were strictly ordered. Previously, if a long-running asynchronous read (like a "watch a key" request) was initiated, subsequent asynchronous calls from the same client would be blocked until the watch request completed. This new feature introduces support for unordered asynchronous reads, allowing other asynchronous operations to proceed without waiting for a pending read.'}),"\n",(0,t.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,t.jsxs)(n.p,{children:['In an asynchronous, event-driven server like Ratis, a "watch a key" mechanism can be implemented where the ',(0,t.jsx)(n.code,{children:"StateMachine"})," does not complete a read future until a specific condition is met. However, if all asynchronous reads are ordered, such a watch request would block all subsequent asynchronous calls from the same client. While a workaround involves creating a new client for each such request, supporting unordered asynchronous reads directly provides a more elegant and efficient solution."]}),"\n",(0,t.jsx)(n.h2,{id:"api-methods",children:"API Methods"}),"\n",(0,t.jsx)(n.p,{children:"To utilize unordered asynchronous reads, the following method is available in the client APIs:"}),"\n",(0,t.jsxs)(n.h3,{id:"asynchronous-api-orgapacheratisclientapiasyncapi",children:["Asynchronous API (",(0,t.jsx)(n.code,{children:"org.apache.ratis.client.api.AsyncApi"}),")"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"CompletableFuture sendReadOnlyUnordered(Message message);\n"})}),"\n",(0,t.jsx)(n.p,{children:"Sends the given readonly message asynchronously to the Raft service without enforcing order with other asynchronous calls from the same client. This is particularly useful for long-running read operations like watch requests."}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["There are no specific new configurations introduced solely for enabling unordered asynchronous reads. The feature leverages existing asynchronous mechanisms within Ratis. The primary change is the introduction of the ",(0,t.jsx)(n.code,{children:"sendReadOnlyUnordered"})," method in the ",(0,t.jsx)(n.code,{children:"AsyncApi"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://issues.apache.org/jira/browse/RATIS-1714",children:"RATIS-1714"})}),"\n",(0,t.jsxs)(n.li,{children:["Pull Request: ",(0,t.jsx)(n.a,{href:"https://github.com/apache/ratis/pull/755",children:"https://github.com/apache/ratis/pull/755"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var s=r(6540);const t={},a=s.createContext(t);function i(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);